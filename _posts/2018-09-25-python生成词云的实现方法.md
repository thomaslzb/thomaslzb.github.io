---
layout:     post
title:      Python ç”Ÿæˆè¯äº‘çš„å®ç°æ–¹æ³•
subtitle:   Python generation word cloud ğŸ˜…
date:       2017-09-25
author:     LZB
header-img: img/post-bg-python.jpg
catalog: true
tags:
    - Python
---


Pythonç”Ÿæˆè¯äº‘çš„å®ç°æ–¹æ³•


ä»Šå¤©è¦ç”Ÿæˆçš„æ˜¯åŠ±å¿—æ­Œæ›²çš„è¯äº‘ï¼Œç™¾åº¦æ–‡åº“é‡Œé¢æ‰¾äº†20æ¥é¦–ï¼Œå¦‚ã€Šå€”å¼ºã€‹ï¼Œæµ·é˜”å¤©ç©ºæ˜¯ï¼Œä»€ä¹ˆçš„å¤§å®¶ç†Ÿæ‚‰çš„ã€‚

æ‰€è¦ç”¨åˆ°çš„pythonåº“æœ‰ jiebaï¼ˆä¸€ä¸ªä¸­æ–‡åˆ†è¯åº“ï¼‰ã€wordcould ã€matplotlibã€PILã€numpyã€‚

é¦–å…ˆæˆ‘ä»¬è¦åšçš„æ˜¯è¯»å–æ­Œè¯ã€‚æˆ‘å°†æ­Œè¯å­˜åœ¨äº†æ–‡ä»¶ç›®å½•ä¸‹åŠ±å¿—æ­Œæ›²æ–‡æœ¬ä¸­ã€‚

ç°åœ¨æ¥è¯»å–ä»–

    #encoding=gbk
    lyric= ''
    f=open('./åŠ±å¿—æ­Œæ›²æ­Œè¯.txt','r')
    for i in f:
      lyric+=f.read()
    

åŠ å…¥#encoding=gbkæ˜¯ä¸ºäº†é˜²æ­¢åé¢æ“ä½œæŠ¥é”™SyntaxError: Non-UTF-8 code starting with '\xc0'

ç„¶åæˆ‘ä»¬ç”¨jiebaåˆ†è¯æ¥å¯¹æ­Œæ›²åšåˆ†è¯æå–å‡ºè¯é¢‘é«˜çš„è¯

    import jieba.analyse
    result=jieba.analyse.textrank(lyric,topK=50,withWeight=True)
    keywords = dict()
    for i in result:
      keywords[i[0]]=i[1]
    print(keywords)
    


å¾—åˆ°ç»“æœï¼š



ç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡wrodcloudç­‰åº“æ¥ç”Ÿæˆè¯äº‘äº†

é¦–å…ˆå…ˆè‡ªå·±æ‰¾ä¸€å¼ å›¾ç‰‡æ¥ä½œä¸ºç”Ÿæˆè¯äº‘çš„å½¢çŠ¶çš„å›¾

[](http://thomaslzb.github.io/img/balloon.img)


    from PIL import Image,ImageSequence
    import numpy as np
    import matplotlib.pyplot as plt
    from wordcloud import WordCloud,ImageColorGenerator
    image= Image.open('./tim.jpg')
    graph = np.array(image)
    wc = WordCloud(font_path='./fonts/simhei.ttf',background_color='White',max_words=50,mask=graph)
    wc.generate_from_frequencies(keywords)
    image_color = ImageColorGenerator(graph)
    plt.imshow(wc)
    plt.imshow(wc.recolor(color_func=image_color))
    plt.axis("off")
    plt.show()
    


ä¿å­˜ç”Ÿæˆå›¾ç‰‡



å®Œæ•´ä»£ç ï¼š

    #encoding=gbk
    import jieba.analyse
    from PIL import Image,ImageSequence
    import numpy as np
    import matplotlib.pyplot as plt
    from wordcloud import WordCloud,ImageColorGenerator
    lyric= ''
    f=open('./åŠ±å¿—æ­Œæ›²æ­Œè¯.txt','r')
    for i in f:
      lyric+=f.read()
     
     
    result=jieba.analyse.textrank(lyric,topK=50,withWeight=True)
    keywords = dict()
    for i in result:
      keywords[i[0]]=i[1]
    print(keywords)
     
     
    image= Image.open('./tim.jpg')
    graph = np.array(image)
    wc = WordCloud(font_path='./fonts/simhei.ttf',background_color='White',max_words=50,mask=graph)
    wc.generate_from_frequencies(keywords)
    image_color = ImageColorGenerator(graph)
    plt.imshow(wc)
    plt.imshow(wc.recolor(color_func=image_color))
    plt.axis("off")
    plt.show()
    wc.to_file('dream.png')
    
END




https://www.jb51.net/article/116020.htm